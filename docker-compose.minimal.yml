# OrcBot Minimal Setup with Lightpanda
# Smaller footprint, uses Lightpanda for browser automation
# Run: docker compose -f docker-compose.minimal.yml up -d

services:
  orcbot:
    build:
      context: .
      dockerfile: Dockerfile.minimal
    container_name: orcbot
    restart: unless-stopped
    ports:
      - "3100:3100"
    volumes:
      - orcbot-data:/root/.orcbot
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY:-}
      - NVIDIA_API_KEY=${NVIDIA_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY:-}
      - TELEGRAM_TOKEN=${TELEGRAM_TOKEN:-}
      - DISCORD_TOKEN=${DISCORD_TOKEN:-}
      - SERPER_API_KEY=${SERPER_API_KEY:-}
      - GATEWAY_API_KEY=${GATEWAY_API_KEY:-}
      # Connect to Lightpanda container
      - LIGHTPANDA_ENDPOINT=ws://lightpanda:9222
    depends_on:
      - lightpanda
    networks:
      - orcbot-network

  lightpanda:
    image: lightpanda/browser:nightly
    container_name: orcbot-lightpanda
    restart: unless-stopped
    command: ["serve", "--host", "0.0.0.0", "--port", "9222"]
    networks:
      - orcbot-network

networks:
  orcbot-network:
    driver: bridge

volumes:
  orcbot-data:
